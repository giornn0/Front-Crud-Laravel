<div fxLayout="row" class="form-wrapper" fxLayoutAlign="space-evenly center">
  <mat-card
    fxFlex="60"
    fxFlex.xs="90"
    fxFlex.sm="90"
    fxLayout="column"
    fxLayoutGap="1.5vw"
  >
    <mat-card-header
      fxFlex="30"
      fxFlex.xs="50"
      fxFlex.sm="50"
      fxFill
      fxLayoutAlign="center center"
    >
      <mat-card-title
        ><mat-label class="title">
          {{ isEdit ? "Edit store " + store.name : "New store" }}
        </mat-label>
      </mat-card-title>
      <mat-icon
        fxLayoutAlign="stretch"
        [ngClass]="{ 't-secondary': isEdit, 't-primary': !isEdit }"
        class="lg-size-icon"
        >{{ isEdit ? "edit" : "add_circle" }}</mat-icon
      >
    </mat-card-header>
    <div fxFlex="10" fxFill></div>
    <mat-card-content
      fxFlex="50"
      fxFill
      fxLayout="row"
      fxLayoutAlign="center center"
    >
      <form
        [formGroup]="storeForm"
        id="ngEmployeeForm"
        (ngSubmit)="submit()"
        automplete="off"
        fxFlex="40"
        fxFlex.xs="80"
        fxFlex.sm="80"
        fxLayout="column"
      >
        <mat-form-field class="form-field" appearance="outline">
          <mat-label>Name</mat-label>
          <input
            matInput
            type="text"
            formControlName="name"
            placeholder="Last name"
          />
          <mat-error *ngIf="invalid('first_name')"
            >This field is necesary</mat-error
          >
        </mat-form-field>
        <mat-form-field class="form-field" appearance="outline">
          <mat-label>Store</mat-label>
          <mat-select matInput formControlName="manager_staff_id">
            <mat-option
              *ngFor="let employee of personal"
              [value]="employee.staff_id"
            >
              {{ employee.first_name }} {{ employee.last_name }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="invalid('store_id')"
            >Please, select a store for the employee</mat-error
          >
        </mat-form-field>
        <app-address-form
          [editingAddress]="address"
          (valid)="validAddress = $event"
          (submiting)="address = $event"
        ></app-address-form>
      </form>
    </mat-card-content>
    <mat-card-actions fxFlex="20" fxLayout="row" fxLayoutAlign="center center">
      <button
        fxFlex="30"
        mat-raised-button
        color="warn"
        [routerLink]="['/staff']"
      >
        Cancel
      </button>
      <button
        fxFlex="30"
        mat-raised-button
        color="primary"
        type="submit"
        form="ngEmployeeForm"
      >
        {{ isEdit ? "Confirm" : "Charge" }}
      </button>
    </mat-card-actions>
  </mat-card>
  <mat-icon class="form-icon" fxShow.xs="false" fxShow.sm="false"
    >add_business</mat-icon
  >
</div>
